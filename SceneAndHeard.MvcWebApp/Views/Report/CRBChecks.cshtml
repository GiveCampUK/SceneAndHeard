@model IEnumerable<SceneCrm.Entities.VolunteerCrbCheck>

@{
    ViewBag.Title = "CRBChecks";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>CRBChecks</h2>

<table>
    <tr>
        <th>
            FirstName
        </th>
        <th>
            Surname
        </th>
        <th>
            PerformanceAttended
        </th>
        <th>
            CrbNumber
        </th>
        <th>
            Application Date
        </th>
        <th>
            Application Expiry Date
        </th>
        <th>
            Approved
        </th>
        <th>
            Approval Date
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.OrderBy(c => c.ApplicationExpiryDate.GetValueOrDefault())) {
    <tr @if (item.ApplicationExpiryDate.HasValue && item.ApplicationExpiryDate.Value <= DateTime.UtcNow) { @Html.Raw("style='background-color:pink;") } >
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Surname)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PerformanceAttended)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CrbNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ApplicationDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ApplicationExpiryDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Approved)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ApprovalDate)
        </td>
    </tr>
}

</table>
